<template>
  <div class="spacing-demo">
    <div class="demo-header">
      <h2 class="text-2xl font-bold text-gray-900 mb-2">CSS é—´è·ç³»ç»Ÿ</h2>
      <p class="text-gray-600">ç†è§£å’ŒæŒæ¡å†…è¾¹è·ã€å¤–è¾¹è·ä»¥åŠç›’æ¨¡å‹çš„å·¥ä½œåŸç†</p>
    </div>

    <!-- ç›’æ¨¡å‹åŸºç¡€ -->
    <section class="demo-section">
      <h3 class="section-title">CSS ç›’æ¨¡å‹</h3>
      
      <div class="theory-box">
        <h4 class="font-semibold mb-2">ğŸ’¡ ç›’æ¨¡å‹ç»„æˆ</h4>
        <p class="text-sm text-gray-600 mb-4">
          æ¯ä¸ª HTML å…ƒç´ éƒ½å¯ä»¥çœ‹ä½œä¸€ä¸ªçŸ©å½¢ç›’å­ï¼Œç”±å†…å®¹åŒºåŸŸã€å†…è¾¹è·ã€è¾¹æ¡†å’Œå¤–è¾¹è·ç»„æˆã€‚
        </p>
      </div>

      <div class="box-model-demo">
        <div class="box-model-visual">
          <div class="margin-area">
            <div class="margin-label">margin (å¤–è¾¹è·)</div>
            <div class="border-area">
              <div class="border-label">border (è¾¹æ¡†)</div>
              <div class="padding-area">
                <div class="padding-label">padding (å†…è¾¹è·)</div>
                <div class="content-area">
                  <div class="content-label">content (å†…å®¹)</div>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <div class="box-model-info">
          <h4 class="font-semibold mb-3">ç›’æ¨¡å‹å°ºå¯¸è®¡ç®—</h4>
          <div class="calculation-box">
            <div class="calc-item">
              <strong>æ ‡å‡†ç›’æ¨¡å‹ (content-box):</strong><br>
              æ€»å®½åº¦ = width + padding + border + margin
            </div>
            <div class="calc-item">
              <strong>IEç›’æ¨¡å‹ (border-box):</strong><br>
              æ€»å®½åº¦ = width + margin<br>
              <small>width åŒ…å«äº† content + padding + border</small>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- å†…è¾¹è·æ§åˆ¶ -->
    <section class="demo-section">
      <h3 class="section-title">å†…è¾¹è· (Padding)</h3>
      
      <div class="demo-playground">
        <div class="controls">
          <h4 class="font-semibold mb-3">Padding è®¾ç½®</h4>
          <div class="control-group">
            <label>ä¸Šè¾¹è·: {{ paddingTop }}px</label>
            <input v-model="paddingTop" type="range" min="0" max="50" class="control-range">
          </div>
          <div class="control-group">
            <label>å³è¾¹è·: {{ paddingRight }}px</label>
            <input v-model="paddingRight" type="range" min="0" max="50" class="control-range">
          </div>
          <div class="control-group">
            <label>ä¸‹è¾¹è·: {{ paddingBottom }}px</label>
            <input v-model="paddingBottom" type="range" min="0" max="50" class="control-range">
          </div>
          <div class="control-group">
            <label>å·¦è¾¹è·: {{ paddingLeft }}px</label>
            <input v-model="paddingLeft" type="range" min="0" max="50" class="control-range">
          </div>
          <div class="control-group">
            <button @click="setPaddingUniform" class="btn-secondary">ç»Ÿä¸€è®¾ç½®</button>
          </div>
        </div>

        <div class="preview-area">
          <div class="padding-demo-container">
            <div class="padding-demo-element" :style="paddingStyle">
              <div class="inner-content">
                å†…å®¹åŒºåŸŸ<br>
                è°ƒæ•´å·¦ä¾§æ»‘å—æŸ¥çœ‹paddingæ•ˆæœ
              </div>
            </div>
          </div>
        </div>

        <div class="code-display">
          <CodeBlock 
            :code="paddingCSS" 
            language="css" 
            title="ç”Ÿæˆçš„ CSS ä»£ç "
            :show-line-numbers="true"
          />
        </div>
      </div>
    </section>

    <!-- å¤–è¾¹è·æ§åˆ¶ -->
    <section class="demo-section">
      <h3 class="section-title">å¤–è¾¹è· (Margin)</h3>
      
      <div class="demo-playground">
        <div class="controls">
          <h4 class="font-semibold mb-3">Margin è®¾ç½®</h4>
          <div class="control-group">
            <label>ä¸Šè¾¹è·: {{ marginTop }}px</label>
            <input v-model="marginTop" type="range" min="0" max="50" class="control-range">
          </div>
          <div class="control-group">
            <label>å³è¾¹è·: {{ marginRight }}px</label>
            <input v-model="marginRight" type="range" min="0" max="50" class="control-range">
          </div>
          <div class="control-group">
            <label>ä¸‹è¾¹è·: {{ marginBottom }}px</label>
            <input v-model="marginBottom" type="range" min="0" max="50" class="control-range">
          </div>
          <div class="control-group">
            <label>å·¦è¾¹è·: {{ marginLeft }}px</label>
            <input v-model="marginLeft" type="range" min="0" max="50" class="control-range">
          </div>
          <div class="control-group">
            <button @click="setMarginAuto" class="btn-secondary">æ°´å¹³å±…ä¸­ (auto)</button>
          </div>
        </div>

        <div class="preview-area">
          <div class="margin-demo-container">
            <div class="margin-reference">å‚è€ƒå…ƒç´ </div>
            <div class="margin-demo-element" :style="marginStyle">
              å¸¦å¤–è¾¹è·çš„å…ƒç´ 
            </div>
            <div class="margin-reference">å‚è€ƒå…ƒç´ </div>
          </div>
        </div>

        <div class="code-display">
          <CodeBlock 
            :code="marginCSS" 
            language="css" 
            title="ç”Ÿæˆçš„ CSS ä»£ç "
            :show-line-numbers="true"
          />
        </div>
      </div>
    </section>

    <!-- ç›’æ¨¡å‹ç±»å‹ -->
    <section class="demo-section">
      <h3 class="section-title">box-sizing å±æ€§</h3>
      
      <div class="demo-playground">
        <div class="controls">
          <h4 class="font-semibold mb-3">ç›’æ¨¡å‹è®¾ç½®</h4>
          <div class="control-group">
            <label>box-sizing:</label>
            <select v-model="boxSizing" class="control-select">
              <option value="content-box">content-box (æ ‡å‡†)</option>
              <option value="border-box">border-box (IE)</option>
            </select>
          </div>
          <div class="control-group">
            <label>å®½åº¦: {{ boxWidth }}px</label>
            <input v-model="boxWidth" type="range" min="200" max="400" class="control-range">
          </div>
          <div class="control-group">
            <label>å†…è¾¹è·: {{ boxPadding }}px</label>
            <input v-model="boxPadding" type="range" min="0" max="50" class="control-range">
          </div>
          <div class="control-group">
            <label>è¾¹æ¡†: {{ boxBorder }}px</label>
            <input v-model="boxBorder" type="range" min="0" max="20" class="control-range">
          </div>
        </div>

        <div class="preview-area">
          <div class="box-sizing-comparison">
            <div class="box-demo">
              <h5>box-sizing: {{ boxSizing }}</h5>
              <div class="sizing-box" :style="boxSizingStyle">
                è®¾ç½®å®½åº¦: {{ boxWidth }}px<br>
                å®é™…å ç”¨: {{ actualWidth }}px
              </div>
              <div class="size-info">
                <strong>è®¡ç®—è¯´æ˜:</strong><br>
                {{ sizeCalculation }}
              </div>
            </div>
          </div>
        </div>

        <div class="code-display">
          <CodeBlock 
            :code="boxSizingCSS" 
            language="css" 
            title="ç”Ÿæˆçš„ CSS ä»£ç "
            :show-line-numbers="true"
          />
        </div>
      </div>
    </section>

    <!-- é—´è·æœ€ä½³å®è·µ -->
    <section class="demo-section">
      <h3 class="section-title">é—´è·è®¾è®¡æœ€ä½³å®è·µ</h3>
      
      <div class="best-practices">
        <div class="practice-grid">
          <div class="practice-card">
            <h4 class="practice-title">ğŸ“ é—´è·ç³»ç»Ÿ</h4>
            <div class="spacing-scale">
              <div v-for="(space, index) in spacingScale" :key="index" class="scale-item">
                <div class="scale-visual" :style="{ width: space.value + 'px', height: '20px' }"></div>
                <span class="scale-label">{{ space.name }}: {{ space.value }}px</span>
              </div>
            </div>
          </div>
          
          <div class="practice-card">
            <h4 class="practice-title">ğŸ¯ è®¾è®¡åŸåˆ™</h4>
            <ul class="principle-list">
              <li>ä½¿ç”¨ä¸€è‡´çš„é—´è·æ¯”ä¾‹</li>
              <li>ä¼˜å…ˆä½¿ç”¨ border-box æ¨¡å‹</li>
              <li>åˆç†åˆ©ç”¨ margin åˆå¹¶</li>
              <li>ç§»åŠ¨ç«¯å¢åŠ è§¦æ‘¸åŒºåŸŸ</li>
              <li>ä¿æŒè§†è§‰å±‚æ¬¡æ¸…æ™°</li>
            </ul>
          </div>
          
          <div class="practice-card">
            <h4 class="practice-title">ğŸ”§ å¸¸ç”¨æŠ€å·§</h4>
            <div class="technique-examples">
              <div class="technique-item">
                <strong>æ°´å¹³å±…ä¸­:</strong>
                <code>margin: 0 auto;</code>
              </div>
              <div class="technique-item">
                <strong>å‚ç›´é—´è·:</strong>
                <code>margin-bottom: 1rem;</code>
              </div>
              <div class="technique-item">
                <strong>è´Ÿè¾¹è·:</strong>
                <code>margin-left: -10px;</code>
              </div>
            </div>
          </div>
          
          <div class="practice-card">
            <h4 class="practice-title">ğŸ“± å“åº”å¼é—´è·</h4>
            <div class="responsive-example">
              <CodeBlock 
                code="/* ç§»åŠ¨ç«¯ */
.container {
  padding: 1rem;
}

/* æ¡Œé¢ç«¯ */
@media (min-width: 768px) {
  .container {
    padding: 2rem;
  }
}" 
                language="css" 
                :show-line-numbers="true"
              />
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>
</template>

<script>
import CodeBlock from '@/components/common/CodeBlock.vue'

export default {
  components: {
    CodeBlock
  },
  name: 'SpacingDemo',
  data() {
    return {
      // Padding æ§åˆ¶
      paddingTop: 10,
      paddingRight: 15,
      paddingBottom: 10,
      paddingLeft: 15,
      
      // Margin æ§åˆ¶
      marginTop: 20,
      marginRight: 10,
      marginBottom: 20,
      marginLeft: 10,
      
      // Box-sizing æ§åˆ¶
      boxSizing: 'content-box',
      boxWidth: 300,
      boxPadding: 20,
      boxBorder: 5,
      
      // é—´è·æ¯”ä¾‹ç³»ç»Ÿ
      spacingScale: [
        { name: 'xs', value: 4 },
        { name: 'sm', value: 8 },
        { name: 'md', value: 16 },
        { name: 'lg', value: 24 },
        { name: 'xl', value: 32 },
        { name: '2xl', value: 48 }
      ]
    }
  },
  computed: {
    paddingStyle() {
      return {
        paddingTop: this.paddingTop + 'px',
        paddingRight: this.paddingRight + 'px',
        paddingBottom: this.paddingBottom + 'px',
        paddingLeft: this.paddingLeft + 'px',
        backgroundColor: '#e3f2fd',
        border: '2px solid #2196f3',
        borderRadius: '8px'
      }
    },
    
    marginStyle() {
      return {
        marginTop: this.marginTop + 'px',
        marginRight: this.marginRight + 'px',
        marginBottom: this.marginBottom + 'px',
        marginLeft: this.marginLeft + 'px',
        backgroundColor: '#fff3e0',
        border: '2px solid #ff9800',
        borderRadius: '8px',
        padding: '15px',
        width: '200px'
      }
    },
    
    boxSizingStyle() {
      return {
        boxSizing: this.boxSizing,
        width: this.boxWidth + 'px',
        padding: this.boxPadding + 'px',
        border: this.boxBorder + 'px solid #4caf50',
        backgroundColor: '#f1f8e9',
        borderRadius: '8px'
      }
    },
    
    actualWidth() {
      if (this.boxSizing === 'content-box') {
        return this.boxWidth + (this.boxPadding * 2) + (this.boxBorder * 2)
      } else {
        return this.boxWidth
      }
    },
    
    sizeCalculation() {
      if (this.boxSizing === 'content-box') {
        return `${this.boxWidth} (width) + ${this.boxPadding * 2} (padding) + ${this.boxBorder * 2} (border) = ${this.actualWidth}px`
      } else {
        return `${this.boxWidth}px (width åŒ…å«æ‰€æœ‰å†…å®¹)`
      }
    },
    
    paddingCSS() {
      if (this.paddingTop === this.paddingRight && this.paddingRight === this.paddingBottom && this.paddingBottom === this.paddingLeft) {
        return `.element {\n  padding: ${this.paddingTop}px;\n}`
      } else if (this.paddingTop === this.paddingBottom && this.paddingLeft === this.paddingRight) {
        return `.element {\n  padding: ${this.paddingTop}px ${this.paddingRight}px;\n}`
      } else {
        return `.element {\n  padding: ${this.paddingTop}px ${this.paddingRight}px ${this.paddingBottom}px ${this.paddingLeft}px;\n}`
      }
    },
    
    marginCSS() {
      if (this.marginTop === this.marginRight && this.marginRight === this.marginBottom && this.marginBottom === this.marginLeft) {
        return `.element {\n  margin: ${this.marginTop}px;\n}`
      } else if (this.marginTop === this.marginBottom && this.marginLeft === this.marginRight) {
        return `.element {\n  margin: ${this.marginTop}px ${this.marginRight}px;\n}`
      } else {
        return `.element {\n  margin: ${this.marginTop}px ${this.marginRight}px ${this.marginBottom}px ${this.marginLeft}px;\n}`
      }
    },
    
    boxSizingCSS() {
      return `.element {\n  box-sizing: ${this.boxSizing};\n  width: ${this.boxWidth}px;\n  padding: ${this.boxPadding}px;\n  border: ${this.boxBorder}px solid #4caf50;\n}`
    }
  },
  methods: {
    setPaddingUniform() {
      const avg = Math.round((this.paddingTop + this.paddingRight + this.paddingBottom + this.paddingLeft) / 4)
      this.paddingTop = this.paddingRight = this.paddingBottom = this.paddingLeft = avg
    },
    
    setMarginAuto() {
      this.marginLeft = this.marginRight = 'auto'
      // ä¸ºäº†æ¼”ç¤ºï¼Œè®¾ç½®ä¸€ä¸ªç‰¹æ®Šå€¼
      this.$nextTick(() => {
        this.marginLeft = this.marginRight = 25
      })
    }
  }
}
</script>

<style scoped>
.spacing-demo {
  @apply space-y-8;
}

.demo-header {
  @apply bg-white rounded-lg shadow-md p-6 border border-gray-200;
}

.demo-section {
  @apply bg-white rounded-lg shadow-md overflow-hidden border border-gray-200;
}

.section-title {
  @apply text-xl font-semibold text-gray-900 p-6 pb-4 border-b border-gray-200;
}

.theory-box {
  @apply p-6 bg-blue-50 border-b border-gray-200;
}

.box-model-demo {
  @apply grid grid-cols-1 lg:grid-cols-2 gap-8 p-6;
}

.box-model-visual {
  @apply flex justify-center;
}

.margin-area {
  @apply relative p-6 bg-orange-100 border-2 border-dashed border-orange-400 rounded-lg;
}

.border-area {
  @apply relative p-4 bg-green-100 border-4 border-solid border-green-500 rounded-lg;
}

.padding-area {
  @apply relative p-4 bg-blue-100 border-2 border-dashed border-blue-400 rounded-lg;
}

.content-area {
  @apply p-4 bg-white border border-gray-300 rounded-lg text-center;
}

.margin-label,
.border-label,
.padding-label,
.content-label {
  @apply absolute text-xs font-medium;
}

.margin-label {
  @apply top-1 left-1 text-orange-700;
}

.border-label {
  @apply top-1 right-1 text-green-700;
}

.padding-label {
  @apply bottom-1 left-1 text-blue-700;
}

.content-label {
  @apply text-gray-700;
}

.box-model-info {
  @apply space-y-4;
}

.calculation-box {
  @apply space-y-3;
}

.calc-item {
  @apply p-3 bg-gray-50 rounded-lg border border-gray-200 text-sm;
}

.demo-playground {
  @apply grid grid-cols-1 lg:grid-cols-3 gap-6 p-6;
}

.controls {
  @apply space-y-4;
}

.control-group {
  @apply flex flex-col space-y-2;
}

.control-group label {
  @apply text-sm font-medium text-gray-700;
}

.control-range {
  @apply w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer;
}

.control-range::-webkit-slider-thumb {
  @apply appearance-none w-4 h-4 bg-blue-500 rounded-full cursor-pointer;
}

.control-select {
  @apply px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm;
}

.btn-secondary {
  @apply px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors text-sm;
}

.preview-area {
  @apply lg:col-span-2 bg-gray-50 rounded-lg p-6;
}

.padding-demo-container {
  @apply flex justify-center;
}

.padding-demo-element {
  @apply inline-block;
}

.inner-content {
  @apply text-center text-gray-700 font-medium;
}

.margin-demo-container {
  @apply space-y-4;
}

.margin-reference {
  @apply p-3 bg-gray-200 text-gray-700 text-center rounded border;
}

.margin-demo-element {
  @apply p-3 text-center font-medium text-gray-700;
}

.box-sizing-comparison {
  @apply space-y-4;
}

.box-demo {
  @apply space-y-3;
}

.sizing-box {
  @apply text-center font-medium text-gray-700;
}

.size-info {
  @apply text-sm bg-white p-3 rounded border border-gray-200;
}

.code-display {
  @apply lg:col-span-3 mt-4;
}

.code-block {
  @apply bg-gray-900 text-gray-100 p-4 rounded-lg text-sm overflow-x-auto;
}

.best-practices {
  @apply p-6;
}

.practice-grid {
  @apply grid grid-cols-1 md:grid-cols-2 gap-6;
}

.practice-card {
  @apply bg-gray-50 rounded-lg p-4 border border-gray-200;
}

.practice-title {
  @apply text-lg font-semibold text-gray-900 mb-3;
}

.spacing-scale {
  @apply space-y-2;
}

.scale-item {
  @apply flex items-center space-x-3;
}

.scale-visual {
  @apply bg-blue-500 rounded;
}

.scale-label {
  @apply text-sm font-mono;
}

.principle-list {
  @apply space-y-2 text-sm text-gray-600;
}

.principle-list li {
  @apply flex items-start space-x-2;
}

.principle-list li::before {
  content: "â€¢";
  @apply text-blue-500 font-bold;
}

.technique-examples {
  @apply space-y-3;
}

.technique-item {
  @apply text-sm;
}

.technique-item code {
  @apply bg-gray-200 px-2 py-1 rounded text-xs block mt-1;
}

.responsive-example pre {
  @apply bg-gray-100 p-3 rounded text-xs overflow-x-auto;
}

/* å“åº”å¼è°ƒæ•´ */
@media (max-width: 1024px) {
  .demo-playground {
    @apply grid-cols-1;
  }
  
  .preview-area {
    @apply col-span-1;
  }
  
  .code-display {
    @apply col-span-1;
  }
  
  .box-model-demo {
    @apply grid-cols-1;
  }
}
</style>
