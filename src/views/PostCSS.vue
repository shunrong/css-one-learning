<template>
  <div class="postcss-page">
    <!-- é¡µé¢å¤´éƒ¨ -->
    <section class="page-header bg-gradient-to-r from-green-500 to-teal-600 text-white">
      <div class="container mx-auto px-4 py-16">
        <h1 class="text-4xl md:text-5xl font-bold mb-4">PostCSS åå¤„ç†</h1>
        <p class="text-xl opacity-90 max-w-3xl">
          æŒæ¡ CSS åå¤„ç†æŠ€æœ¯ï¼Œå®ç°ç°ä»£åŒ–çš„æ ·å¼æ„å»ºæµç¨‹
        </p>
      </div>
    </section>

    <div class="container mx-auto px-4 py-8">
      <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
        <!-- ä¾§è¾¹å¯¼èˆª -->
        <aside class="lg:col-span-1">
          <div class="sticky top-24">
            <nav class="bg-white rounded-lg shadow-md p-6">
              <h3 class="text-lg font-semibold text-gray-900 mb-4">PostCSS ç”Ÿæ€</h3>
              <ul class="space-y-2 text-sm">
                <li><a href="#what-is" class="nav-link">ä»€ä¹ˆæ˜¯ PostCSS</a></li>
                <li><a href="#plugins" class="nav-link">æ ¸å¿ƒæ’ä»¶</a></li>
                <li><a href="#autoprefixer" class="nav-link">Autoprefixer</a></li>
                <li><a href="#preset-env" class="nav-link">postcss-preset-env</a></li>
                <li><a href="#cssnano" class="nav-link">ä¼˜åŒ–æ’ä»¶</a></li>
                <li><a href="#config" class="nav-link">é…ç½®ä½¿ç”¨</a></li>
              </ul>
            </nav>
          </div>
        </aside>

        <!-- ä¸»å†…å®¹åŒºåŸŸ -->
        <main class="lg:col-span-3">
          <!-- PostCSS ä»‹ç» -->
          <section id="what-is" class="content-section">
            <h2 class="section-title">ä»€ä¹ˆæ˜¯ PostCSSï¼Ÿ</h2>
            <div class="prose">
              <p>
                PostCSS æ˜¯ä¸€ä¸ªç”¨ JavaScript å·¥å…·å’Œæ’ä»¶æ¥è½¬æ¢ CSS ä»£ç çš„å·¥å…·ã€‚
                å®ƒä¸æ˜¯ä¸€ä¸ªé¢„å¤„ç†å™¨ï¼Œè€Œæ˜¯ä¸€ä¸ªåå¤„ç†å™¨ï¼Œå¯ä»¥é€šè¿‡æ’ä»¶ç³»ç»Ÿå®ç°å„ç§ CSS å¤„ç†åŠŸèƒ½ã€‚
              </p>
              
              <div class="feature-grid">
                <div class="feature-card">
                  <h3>ğŸ”§ æ’ä»¶åŒ–æ¶æ„</h3>
                  <p>æ¨¡å—åŒ–çš„æ’ä»¶ç³»ç»Ÿï¼ŒæŒ‰éœ€é€‰æ‹©åŠŸèƒ½</p>
                </div>
                <div class="feature-card">
                  <h3>âš¡ é«˜æ€§èƒ½</h3>
                  <p>æ¯”ä¼ ç»Ÿé¢„å¤„ç†å™¨å¿« 3-30 å€</p>
                </div>
                <div class="feature-card">
                  <h3>ğŸ”® æœªæ¥ CSS</h3>
                  <p>æå‰ä½¿ç”¨æœªæ¥çš„ CSS ç‰¹æ€§</p>
                </div>
                <div class="feature-card">
                  <h3>ğŸ› ï¸ å·¥å…·é›†æˆ</h3>
                  <p>æ˜“äºé›†æˆåˆ°ç°æœ‰æ„å»ºæµç¨‹</p>
                </div>
              </div>
            </div>
          </section>

          <!-- æ ¸å¿ƒæ’ä»¶ -->
          <section id="plugins" class="content-section">
            <h2 class="section-title">æ ¸å¿ƒæ’ä»¶ç”Ÿæ€</h2>
            <div class="plugins-showcase">
              <div class="plugin-category">
                <h3>ğŸš€ ç°ä»£åŒ–æ’ä»¶</h3>
                <div class="plugin-list">
                  <div class="plugin-item">
                    <strong>autoprefixer</strong> - è‡ªåŠ¨æ·»åŠ æµè§ˆå™¨å‰ç¼€
                  </div>
                  <div class="plugin-item">
                    <strong>postcss-preset-env</strong> - ä½¿ç”¨æœªæ¥ CSS ç‰¹æ€§
                  </div>
                  <div class="plugin-item">
                    <strong>postcss-custom-properties</strong> - CSS å˜é‡æ”¯æŒ
                  </div>
                </div>
              </div>

              <div class="plugin-category">
                <h3>ğŸ¨ å¢å¼ºåŠŸèƒ½</h3>
                <div class="plugin-list">
                  <div class="plugin-item">
                    <strong>postcss-nested</strong> - åµŒå¥—è§„åˆ™æ”¯æŒ
                  </div>
                  <div class="plugin-item">
                    <strong>postcss-mixins</strong> - æ··åˆå™¨åŠŸèƒ½
                  </div>
                  <div class="plugin-item">
                    <strong>postcss-simple-vars</strong> - Sass é£æ ¼å˜é‡
                  </div>
                </div>
              </div>

              <div class="plugin-category">
                <h3>âš¡ ä¼˜åŒ–æ’ä»¶</h3>
                <div class="plugin-list">
                  <div class="plugin-item">
                    <strong>cssnano</strong> - CSS å‹ç¼©ä¼˜åŒ–
                  </div>
                  <div class="plugin-item">
                    <strong>postcss-uncss</strong> - ç§»é™¤æœªä½¿ç”¨æ ·å¼
                  </div>
                  <div class="plugin-item">
                    <strong>postcss-assets</strong> - èµ„æºç®¡ç†
                  </div>
                </div>
              </div>
            </div>
          </section>

          <!-- Autoprefixer æ¼”ç¤º -->
          <section id="autoprefixer" class="content-section">
            <h2 class="section-title">Autoprefixer è‡ªåŠ¨å‰ç¼€</h2>
            <div class="demo-container">
              <div class="code-comparison">
                <div class="before">
                  <h4>è¾“å…¥ CSS</h4>
                  <pre class="code-block"><code>.example {
  display: flex;
  background: linear-gradient(to right, #000, #fff);
  transform: rotate(45deg);
  user-select: none;
}</code></pre>
                </div>
                <div class="after">
                  <h4>PostCSS å¤„ç†å</h4>
                  <pre class="code-block"><code>.example {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  background: -webkit-linear-gradient(left, #000, #fff);
  background: linear-gradient(to right, #000, #fff);
  -webkit-transform: rotate(45deg);
  transform: rotate(45deg);
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}</code></pre>
                </div>
              </div>
              
              <div class="config-example">
                <h4>é…ç½®ç¤ºä¾‹</h4>
                <pre class="code-block"><code>// postcss.config.js
module.exports = {
  plugins: [
    require('autoprefixer')({
      overrideBrowserslist: [
        '> 1%',
        'last 2 versions',
        'Firefox ESR'
      ]
    })
  ]
}</code></pre>
              </div>
            </div>
          </section>

          <!-- ç°ä»£ CSS ç‰¹æ€§ -->
          <section id="preset-env" class="content-section">
            <h2 class="section-title">postcss-preset-env æœªæ¥ç‰¹æ€§</h2>
            <div class="preset-env-demo">
              <div class="features-grid">
                <div class="feature-demo">
                  <h4>CSS å˜é‡</h4>
                  <div class="code-comparison">
                    <div class="before">
                      <h5>ç°ä»£ CSS</h5>
                      <pre class="code-block"><code>:root {
  --main-color: #06c;
}

.button {
  color: var(--main-color);
}</code></pre>
                    </div>
                    <div class="after">
                      <h5>å…¼å®¹æ€§å¤„ç†</h5>
                      <pre class="code-block"><code>:root {
  --main-color: #06c;
}

.button {
  color: #06c;
  color: var(--main-color);
}</code></pre>
                    </div>
                  </div>
                </div>

                <div class="feature-demo">
                  <h4>è‡ªå®šä¹‰é€‰æ‹©å™¨</h4>
                  <div class="code-comparison">
                    <div class="before">
                      <h5>ç°ä»£ CSS</h5>
                      <pre class="code-block"><code>@custom-selector :--heading h1, h2, h3;

:--heading {
  margin-top: 0;
}</code></pre>
                    </div>
                    <div class="after">
                      <h5>ç¼–è¯‘å</h5>
                      <pre class="code-block"><code>h1, h2, h3 {
  margin-top: 0;
}</code></pre>
                    </div>
                  </div>
                </div>

                <div class="feature-demo">
                  <h4>åµŒå¥—è§„åˆ™</h4>
                  <div class="code-comparison">
                    <div class="before">
                      <h5>åµŒå¥—è¯­æ³•</h5>
                      <pre class="code-block"><code>.component {
  & .title {
    font-size: 1.2em;
    
    & a {
      text-decoration: none;
    }
  }
}</code></pre>
                    </div>
                    <div class="after">
                      <h5>ç¼–è¯‘å</h5>
                      <pre class="code-block"><code>.component .title {
  font-size: 1.2em;
}

.component .title a {
  text-decoration: none;
}</code></pre>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

          <!-- ä¼˜åŒ–é…ç½® -->
          <section id="cssnano" class="content-section">
            <h2 class="section-title">CSS ä¼˜åŒ–ä¸å‹ç¼©</h2>
            <div class="optimization-demo">
              <div class="optimization-example">
                <h4>cssnano å‹ç¼©æ•ˆæœ</h4>
                <div class="code-comparison">
                  <div class="before">
                    <h5>å‹ç¼©å‰ (1.2KB)</h5>
                    <pre class="code-block"><code>.header {
  background-color: rgba(255, 255, 255, 1);
  padding: 10px 20px 10px 20px;
  margin: 0px;
  border-radius: 5px 5px 5px 5px;
}

.header .title {
  font-size: 24px;
  font-weight: normal;
  color: #333333;
}

.header .subtitle {
  font-size: 16px;
  color: #666666;
  margin-top: 5px;
}</code></pre>
                  </div>
                  <div class="after">
                    <h5>å‹ç¼©å (0.3KB)</h5>
                    <pre class="code-block"><code>.header{background-color:#fff;padding:10px 20px;margin:0;border-radius:5px}.header .title{font-size:24px;font-weight:400;color:#333}.header .subtitle{font-size:16px;color:#666;margin-top:5px}</code></pre>
                  </div>
                </div>
              </div>

              <div class="optimization-stats">
                <h4>ä¼˜åŒ–ç»Ÿè®¡</h4>
                <div class="stats-grid">
                  <div class="stat-item">
                    <span class="stat-value">75%</span>
                    <span class="stat-label">ä½“ç§¯å‡å°‘</span>
                  </div>
                  <div class="stat-item">
                    <span class="stat-value">50ms</span>
                    <span class="stat-label">åŠ è½½æå‡</span>
                  </div>
                  <div class="stat-item">
                    <span class="stat-value">100%</span>
                    <span class="stat-label">å…¼å®¹æ€§</span>
                  </div>
                </div>
              </div>
            </div>
          </section>

          <!-- å®é™…é…ç½® -->
          <section id="config" class="content-section">
            <h2 class="section-title">é¡¹ç›®é…ç½®ç¤ºä¾‹</h2>
            <div class="config-examples">
              <div class="config-tab-content">
                <div class="config-item">
                  <h4>åŸºç¡€é…ç½®</h4>
                  <pre class="code-block"><code>// postcss.config.js
module.exports = {
  plugins: [
    require('autoprefixer'),
    require('postcss-preset-env')({
      stage: 1
    }),
    require('cssnano')({
      preset: 'default'
    })
  ]
}</code></pre>
                </div>

                <div class="config-item">
                  <h4>Webpack é›†æˆ</h4>
                  <pre class="code-block"><code>// webpack.config.js
module.exports = {
  module: {
    rules: [
      {
        test: /\.css$/,
        use: [
          'style-loader',
          'css-loader',
          {
            loader: 'postcss-loader',
            options: {
              postcssOptions: {
                plugins: [
                  'autoprefixer',
                  ['postcss-preset-env', { stage: 1 }]
                ]
              }
            }
          }
        ]
      }
    ]
  }
}</code></pre>
                </div>

                <div class="config-item">
                  <h4>Vite é…ç½®</h4>
                  <pre class="code-block"><code>// vite.config.js
export default {
  css: {
    postcss: {
      plugins: [
        require('autoprefixer'),
        require('postcss-preset-env')({
          stage: 1,
          features: {
            'nesting-rules': true,
            'custom-properties': true
          }
        })
      ]
    }
  }
}</code></pre>
                </div>

                <div class="config-item">
                  <h4>package.json é…ç½®</h4>
                  <pre class="code-block"><code>{
  "browserslist": [
    "> 1%",
    "last 2 versions",
    "not dead"
  ],
  "postcss": {
    "plugins": {
      "autoprefixer": {},
      "postcss-preset-env": {
        "stage": 1
      }
    }
  }
}</code></pre>
                </div>
              </div>
            </div>
          </section>
        </main>
      </div>
    </div>
  </div>
</template>

<script>
export default {
  name: 'PostCSS'
}
</script>

<style scoped>
.postcss-page {
  @apply min-h-screen bg-gray-50;
}

.page-header {
  background: linear-gradient(135deg, #10b981 0%, #059669 100%);
  padding: 20px 0;
}

.nav-link {
  @apply text-gray-600 hover:text-green-600 transition-colors;
}

.content-section {
  @apply bg-white rounded-lg shadow-md p-8 mb-8;
}

.section-title {
  @apply text-2xl font-bold text-gray-900 mb-6 pb-4 border-b border-gray-200;
}

.prose p {
  @apply text-gray-600 leading-relaxed mb-4;
}

.feature-grid {
  @apply grid grid-cols-1 md:grid-cols-2 gap-6 mt-6;
}

.feature-card {
  @apply p-4 bg-green-50 rounded-lg border border-green-200;
}

.feature-card h3 {
  @apply font-semibold text-green-800 mb-2;
}

.feature-card p {
  @apply text-green-700 text-sm;
}

.plugins-showcase {
  @apply grid grid-cols-1 md:grid-cols-3 gap-6;
}

.plugin-category h3 {
  @apply font-semibold text-gray-900 mb-4;
}

.plugin-list {
  @apply space-y-3;
}

.plugin-item {
  @apply p-3 bg-gray-50 rounded border border-gray-200 text-sm;
}

.plugin-item strong {
  @apply text-green-600;
}

.demo-container {
  @apply space-y-6;
}

.code-comparison {
  @apply grid grid-cols-1 lg:grid-cols-2 gap-6;
}

.before, .after {
  @apply space-y-2;
}

.before h4, .after h4, .before h5, .after h5 {
  @apply font-semibold text-gray-900;
}

.code-block {
  @apply bg-gray-900 text-gray-100 p-4 rounded-lg text-sm overflow-x-auto;
}

.config-example {
  @apply space-y-2;
}

.preset-env-demo {
  @apply space-y-8;
}

.features-grid {
  @apply space-y-8;
}

.feature-demo {
  @apply space-y-4;
}

.feature-demo h4 {
  @apply font-semibold text-gray-900;
}

.optimization-demo {
  @apply space-y-8;
}

.optimization-example {
  @apply space-y-4;
}

.optimization-stats {
  @apply space-y-4;
}

.stats-grid {
  @apply grid grid-cols-3 gap-4;
}

.stat-item {
  @apply text-center p-4 bg-green-50 rounded-lg border border-green-200;
}

.stat-value {
  @apply block text-2xl font-bold text-green-600;
}

.stat-label {
  @apply block text-sm text-green-700 mt-1;
}

.config-examples {
  @apply space-y-6;
}

.config-item {
  @apply space-y-3;
}

.config-item h4 {
  @apply font-semibold text-gray-900;
}

/* å“åº”å¼è°ƒæ•´ */
@media (max-width: 1024px) {
  .code-comparison {
    @apply grid-cols-1;
  }
  
  .plugins-showcase {
    @apply grid-cols-1;
  }
}
</style>
